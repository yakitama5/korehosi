# DBè¨­è¨ˆ

## âœ…æŠ€è¡“é¸å®š

å½“ã‚¢ãƒ—ãƒªã§ã¯ã€`Dynamic Links`ã‚’ã¯ã˜ã‚ã¨ã—ãŸFirebaseã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å¤šç”¨ã—ã¦ãŠã‚Šã€
ä¸€ã¤ã®ã‚µãƒ¼ãƒ“ã‚¹ã«é›†ç´„ã™ã‚‹ãŸã‚ã€`Cloud Firestore`ã‚’æ¡ç”¨ã™ã‚‹

Firestoreã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ ã¯ä¸‹è¨˜ã®é€šã‚Š

## ğŸ“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ 

### users/{userId}

ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`userId`ã¯`Firebase Authentication`ã§èªè¨¼ã—ãŸ `uid`ã¨åŒä¸€ã®å€¤ã‚’åˆ©ç”¨

| Field        | Type          | Description          | Sample              |
| ------------ | ------------- | -------------------- | ------------------- |
| id           | string        | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID) | XXXX (UUID)         |
| name         | string?       | åå‰                 | ã‚µãƒ³ãƒ—ãƒ« å¤ªéƒ       |
| ageGroup     | string        | ã“ã©ã‚‚ or ãŠã¨ãª     | child               |
| joinGroupIds | array<string> | å‚åŠ ã‚°ãƒ«ãƒ¼ãƒ—ã®IDé…åˆ— | XXXX, YYYY          |
| createdAt    | Timestmap     | ä½œæˆæ—¥æ™‚             | 1987-12-01 00:00:00 |
| updatedAt    | Timestmap     | æ›´æ–°æ—¥æ™‚             | 1987-12-01 00:00:00 |

### _dusers/{userId}

å‰Šé™¤(é€€ä¼š)ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`users`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨**SameIDæ§‹é€ **ã§ã€æ§‹æˆã‚‚å®Œå…¨ã«ä¸€è‡´ã™ã‚‹ãŸã‚å‰²æ„›

### groups/{groupId}

æ‰€å±ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

| Field     | Type          | Description                  | Sample              |
| --------- | ------------- | ---------------------------- | ------------------- |
| id        | string        | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID)         | XXXX (UUID)         |
| name      | string        | ã‚°ãƒ«ãƒ¼ãƒ—å                   | ã‚µãƒ³ãƒ—ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—    |
| ownerUid  | string        | ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ID | YYYY                |
| joinUids  | array<string> | å‚åŠ ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDé…åˆ—       | XXXX, YYYY          |
| itemCount | number        | ç™»éŒ²ã•ã‚ŒãŸæ¬²ã—ã„ç‰©ã®æ•°       | 10                  |
| premium   | boolean       | ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚°ãƒ«ãƒ¼ãƒ—ãƒ•ãƒ©ã‚°     | true                |
| createdAt | Timestmap     | ä½œæˆæ—¥æ™‚                     | 1987-12-01 00:00:00 |
| updatedAt | Timestmap     | æ›´æ–°æ—¥æ™‚                     | 1987-12-01 00:00:00 |

### _dgroups/{groupId}

å‰Šé™¤ã—ãŸã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`groups`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨**SameIDæ§‹é€ **ã§ã€æ§‹æˆã‚‚å®Œå…¨ã«ä¸€è‡´ã™ã‚‹ãŸã‚å‰²æ„›

### groups/{groupId}/items/{itemId}

æ¬²ã—ã„ç‰©ã‚’ä¿æŒã™ã‚‹ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

| Field      | Type           | Description          | Sample                     |
| ---------- | -------------- | -------------------- | -------------------------- |
| id         | string         | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID) | XXXX (UUID)                |
| name       | string?        | æ¬²ã—ã„ç‰©ã®å•†å“å     | ã‚¸ãƒ£ãƒ³ã‚°ãƒ«ã‚¸ãƒ              |
| imagesPath | array<string>? | ç”»åƒé…åˆ—             | image.png, hoge.png        |
| wishRank   | number?        | æ¬²ã—ã„åº¦(5æ®µéšè©•ä¾¡)  | 1                          |
| wishSeason | string?        | ã»ã—ã„æ™‚æœŸ           | ã‚¯ãƒªã‚¹ãƒã‚¹                 |
| wanterName | string?        | æ¬²ã—ã„äººã®åå‰       | å­ä¾›                       |
| urls       | array<string>? | URLé…åˆ—              | http://***                 |
| memo       | string?        | ãƒ¡ãƒ¢                 | ãŠã°ã‚ã¡ã‚ƒã‚“ã«è²·ã£ã¦ã»ã—ã„ |
| createdAt  | Timestmap      | ä½œæˆæ—¥æ™‚             | 1987-12-01 00:00:00        |
| updatedAt  | Timestmap      | æ›´æ–°æ—¥æ™‚             | 1987-12-01 00:00:00        |

### groups/{groupId}/_ditems/{itemId}

å‰Šé™¤ã—ãŸæ¬²ã—ã„ç‰©æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`items`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨**SameIDæ§‹é€ **ã§ã€æ§‹æˆã‚‚å®Œå…¨ã«ä¸€è‡´ã™ã‚‹ãŸã‚å‰²æ„›

### groups/{groupId}/purchases/{purchaseId}

æ¬²ã—ã„ç‰©ã®è³¼å…¥æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`items`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨SameIDæ§‹é€ ã¨ã™ã‚‹

| Field     | Type       | Description                                | Sample              |
| --------- | ---------- | ------------------------------------------ | ------------------- |
| id        | string     | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID)                       | XXXX (UUID)         |
| name      | string     | æ¬²ã—ã„ç‰©ã®å•†å“å                           | ã‚¸ãƒ£ãƒ³ã‚°ãƒ«ã‚¸ãƒ       |
| surprise  | boolean    | ã‚µãƒ—ãƒ©ã‚¤ã‚ºãƒ•ãƒ©ã‚°ã€å­ä¾›ã«ãƒ’ãƒŸãƒ„ã«ã™ã‚‹ã‹å¦ã‹ | true                |
| price     | number     | å€¤æ®µ                                       | 1000                |
| planDate  | Timestamp? | è³¼å…¥äºˆå®šæ—¥                                 | 1987-12-01 00:00:00 |
| sentAt    | Timestamp? | æ¬²ã—ã„ç‰©ã‚’æ¸¡ã—ãŸæ—¥                         | 1987-12-01 00:00:0  |
| buyerName | string     | è³¼å…¥ã—ãŸäººã®åå‰                           | ã‚µãƒ³ãƒ—ãƒ« å¤ªéƒ       |
| memo      | string     | ãƒ¡ãƒ¢                                       | ãƒ¡ãƒ¢                |
| createdAt | Timestmap  | ä½œæˆæ—¥æ™‚                                   | 1987-12-01 00:00:00 |
| updatedAt | Timestmap  | æ›´æ–°æ—¥æ™‚                                   | 1987-12-01 00:00:00 |

### groups/{groupId}/_dpurchases/{purchaseId}

æ¬²ã—ã„ç‰©ã®è³¼å…¥æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

`purchases`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨**SameIDæ§‹é€ **ã§ã€æ§‹æˆã‚‚å®Œå…¨ã«ä¸€è‡´ã™ã‚‹ãŸã‚å‰²æ„›

### groups/{groupId}/participants/{userId}

ã‚°ãƒ«ãƒ¼ãƒ—ã«å‚åŠ ã—ã¦ã„ã‚‹åˆ©ç”¨è€…ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®éƒ½åˆä¸Šã€**ã‚°ãƒ«ãƒ¼ãƒ—å†…ã®åˆ©ç”¨è€…æƒ…å ±ã‚’å‚ç…§ã™ã‚‹å ´åˆã¯ã“ã¡ã‚‰ã‚’å‚ç…§**ã™ã‚‹

`users`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨**SameIDæ§‹é€ **ã§ã€æ§‹æˆã‚‚å®Œå…¨ã«ä¸€è‡´ã™ã‚‹ãŸã‚å‰²æ„›

### shareLinks/{shareLinkId}

ã‚°ãƒ«ãƒ¼ãƒ—ã¸ã®æ‹›å¾…ãƒªãƒ³ã‚¯ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®éƒ½åˆä¸Šã€**è‡ªèº«ãŒæ‰€å±ã—ã¦ã„ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã®ã¿ä½œæˆå¯èƒ½ã€å‚ç…§ã‚„æ›´æ–°ã¯ä¸å¯**ã€‚

| Field     | Type      | Description            | Sample              |
| --------- | --------- | ---------------------- | ------------------- |
| id        | string    | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID)   | XXXX (UUID)         |
| groupId   | string    | ã‚°ãƒ«ãƒ¼ãƒ—ID             | XXXX (UUID)         |
| validDays | number    | ãƒªãƒ³ã‚¯ã®æœ‰åŠ¹æœŸé–“(æ—¥æ•°) | 3                   |
| createdAt | Timestmap | ä½œæˆæ—¥æ™‚               | 1987-12-01 00:00:00 |
| updatedAt | Timestmap | æ›´æ–°æ—¥æ™‚               | 1987-12-01 00:00:00 |

### users/{userId}/fcmTokens/{token}

ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ç”¨ã®FCMãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

| Field     | Type      | Description | Sample              |
| --------- | --------- | ----------- | ------------------- |
| token     | string    | FCMãƒˆãƒ¼ã‚¯ãƒ³ | XXXX                |
| createdAt | Timestmap | ä½œæˆæ—¥æ™‚    | 1987-12-01 00:00:00 |
| updatedAt | Timestmap | æ›´æ–°æ—¥æ™‚    | 1987-12-01 00:00:00 |

### groups/{groupId}/messages/{messageId}

ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã™ã‚‹é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

| Field     | Type      | Description          | Sample              |
| --------- | --------- | -------------------- | ------------------- |
| id        | string    | ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼(UUID) | XXXX (UUID)         |
| title     | string    | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«         |                     |
| body      | string    |                      |                     |
| event     | string    |                      |                     |
| target    | string    |                      |                     |
| createdAt | Timestmap | ä½œæˆæ—¥æ™‚             | 1987-12-01 00:00:00 |
| updatedAt | Timestmap | æ›´æ–°æ—¥æ™‚             | 1987-12-01 00:00:00 |
